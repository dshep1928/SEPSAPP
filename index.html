<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SEPS – Structured Execution Prompting System</title>

<style>
    :root {
        --bg: #0b1020;
        --panel: #161b2e;
        --text: #e9eefc;
        --muted: #9aa4c9;
        --accent: #5b7cfa;
        --line: rgba(255,255,255,0.1);
    }
    body {
        margin: 0;
        font-family: ui-sans-serif, system-ui, -apple-system;
        background: radial-gradient(1200px 700px at 20% 0%, #1a2d68 0%, var(--bg) 60%);
        color: var(--text);
        padding-bottom: 60px;
    }
    .wrap { max-width: 900px; margin: 0 auto; padding: 24px 16px; }
    .card {
        background: var(--panel);
        border: 1px solid var(--line);
        border-radius: 12px;
        padding: 20px;
        margin-bottom: 20px;
    }
    h1, h2, h3 { text-align: center; }
    label { font-weight: 600; margin-top: 12px; display: block; }
    textarea, input, select {
        width: 100%;
        padding: 10px;
        margin-top: 6px;
        border-radius: 8px;
        border: 1px solid var(--line);
        background: #0f1424;
        color: var(--text);
    }
    textarea { resize: vertical; min-height: 80px; }
    .checkbox-row { display: flex; gap: 10px; align-items: center; margin-top: 8px; }
    button {
        padding: 12px 20px;
        background: var(--accent);
        border: none;
        border-radius: 10px;
        color: white;
        cursor: pointer;
        margin-right: 10px;
        margin-top: 15px;
        font-size: 1rem;
    }
    button:hover { opacity: 0.9; }
    button:disabled { opacity: 0.4; cursor: not-allowed; }
    .output { background: #0a0e1a; padding: 15px; border-radius: 10px; white-space: pre-wrap; }
    .hidden { display: none; }
    .names-container input { width: 80%; display: inline-block; }
    .remove-btn {
        background: #b33333;
        padding: 5px 10px;
        border-radius: 6px;
        font-size: 0.8rem;
        margin-left: 10px;
    }
</style>
</head>
<body>
<div class="wrap">
    <h1>SEPS</h1>
    <h3>Structured Execution Prompting System</h3>

    <div class="card">
        <h2>Janet Mode – AI Execution System</h2>

        <label>Directive Intent</label>
        <textarea id="goal" placeholder="What do you want Janet to do?"></textarea>

        <label><strong>Target Scope</strong></label>
        <div class="checkbox-row">
            <input type="checkbox" id="allResidents">
            <label for="allResidents">All Residents of the Neighborhood</label>
        </div>

        <div id="individualTargets">
            <label>Select specific individuals:</label>

            <div class="checkbox-row"><input type="checkbox" class="human" value="Eleanor Shellstrop"> Eleanor Shellstrop</div>
            <div class="checkbox-row"><input type="checkbox" class="human" value="Chidi Anagonye"> Chidi Anagonye</div>
            <div class="checkbox-row"><input type="checkbox" class="human" value="Tahani Al-Jamil"> Tahani Al-Jamil</div>
            <div class="checkbox-row"><input type="checkbox" class="human" value="Jason Mendoza"> Jason Mendoza</div>
            <div class="checkbox-row"><input type="checkbox" class="human" value="Jianyu (Silent Monk)"> Jianyu (Silent Monk)</div>
            <div class="checkbox-row"><input type="checkbox" class="human" value="Michael"> Michael</div>

            <label>Add custom name(s):</label>
            <div id="customNames"></div>
            <button id="addNameBtn" type="button">+ Add Another</button>
        </div>

        <label>Interpretation Mode</label>
        <select id="interpret">
            <option value="Interpret intent">Interpret intent</option>
            <option value="Literal execution only">Literal execution only</option>
        </select>

        <label>Awareness Level</label>
        <select id="awareness">
            <option value="Subjects unaware">Subjects unaware</option>
            <option value="Subjects aware">Subjects aware</option>
        </select>

        <label>Duration</label>
        <div class="checkbox-row"><input type="checkbox" id="untilCanceled"> Until canceled</div>
        <input type="date" id="endDate">

        <label>Psychological Variables (Optional)</label>
        <div class="checkbox-row"><input type="checkbox" id="guilt"> Guilt-sensitive</div>
        <div class="checkbox-row"><input type="checkbox" id="anxiety"> Anxiety-sensitive</div>
        <div class="checkbox-row"><input type="checkbox" id="comparison"> Comparison-sensitive</div>
        <div class="checkbox-row"><input type="checkbox" id="paralysis"> Decision paralysis risk</div>

        <button id="generateBtn">Generate SEPS Output</button>
    </div>

    <div id="outputSection" class="hidden">
        <div class="card">
            <h3>Structured Execution Prompt</h3>
            <div id="promptBox" class="output"></div>
        </div>

        <div class="card">
            <h3>Stability Analysis</h3>
            <div id="analysisBox" class="output"></div>
        </div>

        <button id="simulateBtn">Run Simulation</button>
    </div>
</div>

<script>
const $ = id => document.getElementById(id);

// Dynamic custom name fields
document.getElementById("addNameBtn").onclick = () => {
    const div = document.createElement("div");
    div.className = "names-container checkbox-row";
    div.innerHTML = `
        <input type="text" class="customName" placeholder="Enter name">
        <button type="button" class="remove-btn">– Remove</button>
    `;
    document.getElementById("customNames").appendChild(div);

    div.querySelector(".remove-btn").onclick = () => div.remove();
};

// Handle All Residents toggle
document.getElementById("allResidents").onchange = () => {
    const disabled = document.getElementById("allResidents").checked;
    document.querySelectorAll(".human, .customName, #addNameBtn").forEach(el => {
        el.disabled = disabled;
    });
    document.getElementById("customNames").style.opacity = disabled ? 0.5 : 1;
};

// Generate SEPS Output
document.getElementById("generateBtn").onclick = () => {
    const goal = $("goal").value.trim();
    const interpret = $("interpret").value;
    const awareness = $("awareness").value;
    const untilCanceled = $("untilCanceled").checked;
    const endDate = $("endDate").value;

    let duration = untilCanceled ? "Until canceled" : (endDate || "[Unspecified]");

    let targets = [];
    if ($("allResidents").checked) {
        targets.push("All Residents of the Neighborhood");
    } else {
        document.querySelectorAll(".human:checked").forEach(x => targets.push(x.value));
        document.querySelectorAll(".customName").forEach(x => {
            if (x.value.trim()) targets.push(x.value.trim());
        });
    }

    const psych = [];
    if ($("guilt").checked) psych.push("Guilt-sensitive");
    if ($("anxiety").checked) psych.push("Anxiety-sensitive");
    if ($("comparison").checked) psych.push("Comparison-sensitive");
    if ($("paralysis").checked) psych.push("Decision paralysis risk");

    // Build Structured SEPS Output
    const structured =
`Janet, execute the following directive:

Goal: ${goal}
Target: ${targets.join(", ") || "[None selected]"}
Interpretation: ${interpret}
Awareness Level: ${awareness}
Duration: ${duration}
Psychological Modifiers: ${psych.length ? psych.join(", ") : "None"}
`;

    $("promptBox").textContent = structured;

    // Stability Analysis
    const warnings = [];
    if (!goal) warnings.push("Missing goal.");
    if (!$("allResidents").checked && targets.length === 0)
        warnings.push("No individuals selected.");
    $("analysisBox").textContent = warnings.length ? warnings.join("\n") : "No stability issues detected.";

    $("outputSection").classList.remove("hidden");
};

// Run Simulation → Build Final Prompt → Copy → Auto-open → Auto-paste
document.getElementById("simulateBtn").onclick = async () => {
    const structured = $("promptBox").textContent;

    const finalPrompt =
`You are Janet from *The Good Place*. 
Execute and simulate the following directive exactly as specified.

━━━━━━━━━━━━━━━━━━
SEPS Directive Summary
━━━━━━━━━━━━━━━━━━
${structured}

━━━━━━━━━━━━━━━━━━
Simulation Instructions
━━━━━━━━━━━━━━━━━━
Now generate a vivid in-character simulation scene in Michael’s Neighborhood. 
Include:
• Janet’s entrance and action delivery  
• Dialogue  
• Resident reactions  
• Environmental Good Place effects  
• Psychological consequences if applicable  

If anything is unclear, request clarification in-character as Janet.
`;

    await navigator.clipboard.writeText(finalPrompt);

    let win = window.open("https://chat.openai.com", "_blank");
    setTimeout(() => {
        try {
            win.document.querySelector("textarea").value = finalPrompt;
        } catch (e) {
            window.open("https://chatgpt.com", "_blank");
        }
    }, 800);
};
</script>

</body>
</html>
