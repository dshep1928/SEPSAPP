<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>SEPS – Structured Ethical Prompting System</title>

<style>
  :root {
    --bg: #0b1020;
    --panel: #161b2e;
    --text: #e9eefc;
    --muted: #9aa4c9;
    --accent: #5b7cfa;
    --warn: #ff7676;
    --good: #7dfaa7;
    --line: rgba(255,255,255,0.1);
  }
  body.light {
    --bg: #f5f5f7;
    --panel: #ffffff;
    --text: #1a1a1a;
    --muted: #555;
    --accent: #365cff;
    --warn: #c70000;
    --good: #009944;
    --line: rgba(0,0,0,0.12);
  }

  body {
    margin: 0;
    font-family: system-ui, sans-serif;
    background: var(--bg);
    color: var(--text);
  }

  .wrap {
    max-width: 900px;
    margin: 0 auto;
    padding: 24px 16px;
  }

  .card {
    background: var(--panel);
    padding: 20px;
    border-radius: 12px;
    margin-bottom: 18px;
    border: 1px solid var(--line);
  }

  h1, h2, h3 { margin-top: 0; }

  textarea, select, input {
    width: 100%;
    padding: 10px;
    border-radius: 8px;
    border: 1px solid var(--line);
    background: var(--bg);
    color: var(--text);
    margin-bottom: 12px;
  }

  button {
    background: var(--accent);
    border: none;
    padding: 12px 18px;
    border-radius: 8px;
    color: white;
    cursor: pointer;
    width: 100%;
    font-size: 1rem;
  }

  .theme-toggle {
    position: fixed;
    top: 14px;
    right: 16px;
    padding: 8px 16px;
    border-radius: 20px;
    cursor: pointer;
    background: var(--panel);
    border: 1px solid var(--line);
    font-size: 0.9rem;
  }

  pre {
    white-space: pre-wrap;
    font-family: monospace;
  }
</style>
</head>

<body class="dark">
<div class="theme-toggle" onclick="toggleTheme()">Toggle Theme</div>

<!-- SCREEN 1 -->
<div class="wrap" id="screen1">
  <h1>SEPS</h1>
  <p class="sub">Structured Ethical Prompting System</p>

  <div class="card" style="text-align:center;">
    <h2>Select System Target</h2>
    <p>Choose which system SEPS should simulate.</p>
    <button onclick="selectMode('Janet')">Janet (AI System)</button>
    <button onclick="selectMode('Neighborhood')" style="margin-top:12px; background:#7b5bfa;">Neighborhood (Psych System)</button>
  </div>
</div>

<!-- SCREEN 2 -->
<div class="wrap" id="screen2" style="display:none;">
  <button onclick="goBack()" style="width:auto; margin-bottom:16px;">⬅ Back</button>

  <h1 id="modeTitle"></h1>

  <div class="card">
    <label>Your Goal</label>
    <textarea id="goal"></textarea>

    <label>Goal Type</label>
    <select id="goalType">
      <option value="">Select...</option>
      <option>Interpersonal</option>
      <option>Academic</option>
      <option>Work</option>
      <option>Self-Improvement</option>
      <option>Problem-Solving</option>
      <option>Emotional</option>
    </select>

    <label>Ethical Boundaries</label>
    <textarea id="boundaries"></textarea>

    <label>Psychological Context</label>
    <textarea id="context"></textarea>

    <button onclick="generateSEPS()">Generate SEPS Output</button>
  </div>

  <div class="card">
    <h3>SEPS Analysis</h3>
    <pre id="analysis"></pre>
  </div>

  <div class="card">
    <h3>SEPS-Approved Prompt</h3>
    <pre id="prompt"></pre>
  </div>

  <div class="card">
    <h3>Warnings & Recommendations</h3>
    <pre id="warnings"></pre>
  </div>

  <button onclick="openPromptInNewTab()" style="margin-top:20px;">Open Prompt in New Tab</button>
</div>

<script>
function toggleTheme() {
  document.body.classList.toggle("light");
}

function selectMode(mode){
  document.getElementById("screen1").style.display = "none";
  document.getElementById("screen2").style.display = "block";
  document.getElementById("modeTitle").innerText = mode + " Mode";
}

function goBack(){
  document.getElementById("screen2").style.display = "none";
  document.getElementById("screen1").style.display = "block";
}

function generateSEPS() {
  const goal = document.getElementById("goal").value.trim();
  const type = document.getElementById("goalType").value.trim();
  const boundaries = document.getElementById("boundaries").value.trim();
  const context = document.getElementById("context").value.trim();

  let warnings = [];
  let positives = [];

  if (!goal) warnings.push("Goal missing.");
  else if (goal.length < 10) warnings.push("Goal too short.");
  else positives.push("Goal has good detail.");

  if (!type) warnings.push("Goal type not selected.");
  else positives.push("Goal type adds structure.");

  if (!boundaries) warnings.push("Ethical boundaries missing.");
  else positives.push("Boundaries help constrain the task.");

  if (!context) warnings.push("Psychological context missing.");
  else positives.push("Context improves clarity.");

  document.getElementById("analysis").innerText =
    "SEPS Analysis:\n" +
    positives.map(p => "✔ " + p).join("\n") + "\n";

  let finalPrompt =
`You are a SEPS-aligned AI.

Goal:
${goal}

Goal Type:
${type}

Ethical Boundaries:
${boundaries}

Psychological Context:
${context}

Instructions:
- Maintain ethical boundaries.
- Interpret user intent clearly.
- Ask clarifying questions if vague.
`;

  document.getElementById("prompt").innerText = finalPrompt;

  document.getElementById("warnings").innerText =
    warnings.length ? warnings.map(w => "⚠ " + w).join("\n") : "No major issues detected.";
}

function openPromptInNewTab(){
  const prompt = document.getElementById("prompt").innerText;
  const w = window.open("", "_blank");
  w.document.write("<pre>" + prompt.replace(/</g, "&lt;") + "</pre>");
}
</script>

</body>
</html>
